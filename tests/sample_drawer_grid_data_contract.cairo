%lang starknet

from starkware.cairo.common.cairo_builtins import HashBuiltin
from starkware.cairo.common.registers import get_label_location
from starkware.cairo.common.math import unsigned_div_rem

@view
func get_grid_for_round{syscall_ptr : felt*, pedersen_ptr : HashBuiltin*, range_check_ptr}(
    round : felt
) -> (grid_len : felt, grid : felt*):
    let (grids_location) = get_label_location(grids_label)
    let grids = cast(grids_location, felt*)
    let (q, grid_index) = unsigned_div_rem(round - 1, 100)

    let grid = grids + grid_index * 400
    return (grid_len=400, grid=grid)

    # A grid is a random distribution of our 400 pixels in the grid
    # so it's just an array of 400 felts. Here we generated 100
    # grids off-chain and put them on-chain, so we have an array
    # of 400 x 100 = 40 000 felts. After 100 rounds, it loops

    # This one is a smaller one for tests, with only 3 rounds

    grids_label:
    dw 392
    dw 98
    dw 315
    dw 95
    dw 376
    dw 327
    dw 103
    dw 48
    dw 61
    dw 157
    dw 41
    dw 110
    dw 3
    dw 19
    dw 67
    dw 241
    dw 394
    dw 295
    dw 332
    dw 57
    dw 142
    dw 265
    dw 28
    dw 189
    dw 222
    dw 36
    dw 263
    dw 303
    dw 96
    dw 388
    dw 297
    dw 115
    dw 328
    dw 356
    dw 93
    dw 239
    dw 53
    dw 390
    dw 237
    dw 139
    dw 99
    dw 336
    dw 251
    dw 2
    dw 258
    dw 342
    dw 314
    dw 280
    dw 172
    dw 320
    dw 119
    dw 397
    dw 66
    dw 338
    dw 387
    dw 325
    dw 116
    dw 82
    dw 146
    dw 200
    dw 60
    dw 52
    dw 266
    dw 365
    dw 373
    dw 343
    dw 74
    dw 171
    dw 345
    dw 163
    dw 114
    dw 150
    dw 105
    dw 229
    dw 81
    dw 40
    dw 109
    dw 372
    dw 32
    dw 285
    dw 101
    dw 42
    dw 7
    dw 55
    dw 354
    dw 16
    dw 188
    dw 279
    dw 319
    dw 27
    dw 11
    dw 233
    dw 17
    dw 126
    dw 385
    dw 147
    dw 361
    dw 203
    dw 243
    dw 224
    dw 369
    dw 0
    dw 92
    dw 292
    dw 393
    dw 8
    dw 202
    dw 181
    dw 256
    dw 12
    dw 22
    dw 165
    dw 164
    dw 220
    dw 362
    dw 381
    dw 254
    dw 161
    dw 86
    dw 366
    dw 282
    dw 301
    dw 58
    dw 85
    dw 191
    dw 250
    dw 257
    dw 117
    dw 384
    dw 121
    dw 44
    dw 193
    dw 180
    dw 97
    dw 88
    dw 218
    dw 289
    dw 232
    dw 169
    dw 244
    dw 286
    dw 69
    dw 59
    dw 391
    dw 378
    dw 379
    dw 226
    dw 291
    dw 216
    dw 367
    dw 54
    dw 23
    dw 137
    dw 271
    dw 76
    dw 249
    dw 45
    dw 15
    dw 223
    dw 134
    dw 33
    dw 25
    dw 18
    dw 238
    dw 288
    dw 344
    dw 123
    dw 299
    dw 214
    dw 264
    dw 294
    dw 290
    dw 90
    dw 246
    dw 13
    dw 375
    dw 128
    dw 211
    dw 131
    dw 149
    dw 14
    dw 160
    dw 268
    dw 197
    dw 323
    dw 204
    dw 34
    dw 349
    dw 155
    dw 219
    dw 380
    dw 370
    dw 277
    dw 236
    dw 213
    dw 313
    dw 182
    dw 318
    dw 47
    dw 358
    dw 272
    dw 127
    dw 94
    dw 396
    dw 158
    dw 208
    dw 300
    dw 231
    dw 276
    dw 179
    dw 108
    dw 305
    dw 167
    dw 274
    dw 122
    dw 10
    dw 334
    dw 132
    dw 49
    dw 186
    dw 326
    dw 84
    dw 322
    dw 363
    dw 252
    dw 304
    dw 368
    dw 287
    dw 87
    dw 359
    dw 337
    dw 166
    dw 78
    dw 206
    dw 130
    dw 170
    dw 196
    dw 278
    dw 355
    dw 9
    dw 1
    dw 68
    dw 106
    dw 296
    dw 212
    dw 321
    dw 199
    dw 70
    dw 255
    dw 317
    dw 293
    dw 306
    dw 152
    dw 215
    dw 371
    dw 360
    dw 159
    dw 162
    dw 138
    dw 112
    dw 174
    dw 56
    dw 352
    dw 198
    dw 269
    dw 382
    dw 259
    dw 398
    dw 248
    dw 75
    dw 242
    dw 399
    dw 31
    dw 339
    dw 118
    dw 245
    dw 151
    dw 63
    dw 102
    dw 350
    dw 135
    dw 346
    dw 324
    dw 77
    dw 194
    dw 225
    dw 73
    dw 260
    dw 353
    dw 312
    dw 46
    dw 395
    dw 21
    dw 154
    dw 310
    dw 247
    dw 298
    dw 340
    dw 141
    dw 6
    dw 107
    dw 377
    dw 331
    dw 178
    dw 273
    dw 125
    dw 187
    dw 330
    dw 383
    dw 129
    dw 207
    dw 136
    dw 43
    dw 228
    dw 316
    dw 351
    dw 195
    dw 173
    dw 302
    dw 307
    dw 190
    dw 281
    dw 267
    dw 333
    dw 113
    dw 143
    dw 221
    dw 29
    dw 133
    dw 39
    dw 140
    dw 124
    dw 217
    dw 65
    dw 357
    dw 144
    dw 175
    dw 50
    dw 30
    dw 261
    dw 184
    dw 227
    dw 5
    dw 62
    dw 176
    dw 156
    dw 283
    dw 389
    dw 177
    dw 364
    dw 262
    dw 311
    dw 35
    dw 120
    dw 335
    dw 329
    dw 347
    dw 192
    dw 185
    dw 348
    dw 270
    dw 183
    dw 210
    dw 168
    dw 91
    dw 308
    dw 38
    dw 240
    dw 4
    dw 20
    dw 234
    dw 72
    dw 275
    dw 83
    dw 209
    dw 64
    dw 230
    dw 24
    dw 253
    dw 235
    dw 153
    dw 205
    dw 80
    dw 51
    dw 104
    dw 26
    dw 100
    dw 89
    dw 37
    dw 284
    dw 71
    dw 145
    dw 341
    dw 309
    dw 201
    dw 148
    dw 79
    dw 386
    dw 374
    dw 111
    dw 197
    dw 364
    dw 69
    dw 26
    dw 89
    dw 257
    dw 219
    dw 100
    dw 328
    dw 352
    dw 25
    dw 137
    dw 77
    dw 295
    dw 377
    dw 383
    dw 159
    dw 64
    dw 11
    dw 168
    dw 85
    dw 122
    dw 170
    dw 391
    dw 119
    dw 260
    dw 320
    dw 155
    dw 288
    dw 141
    dw 48
    dw 397
    dw 265
    dw 41
    dw 202
    dw 245
    dw 144
    dw 185
    dw 385
    dw 0
    dw 217
    dw 214
    dw 398
    dw 306
    dw 290
    dw 255
    dw 59
    dw 311
    dw 88
    dw 357
    dw 195
    dw 7
    dw 164
    dw 220
    dw 156
    dw 399
    dw 140
    dw 161
    dw 182
    dw 50
    dw 256
    dw 389
    dw 101
    dw 388
    dw 367
    dw 94
    dw 237
    dw 326
    dw 365
    dw 272
    dw 264
    dw 291
    dw 153
    dw 394
    dw 373
    dw 135
    dw 40
    dw 84
    dw 282
    dw 315
    dw 390
    dw 312
    dw 325
    dw 386
    dw 92
    dw 363
    dw 139
    dw 242
    dw 160
    dw 303
    dw 337
    dw 268
    dw 200
    dw 44
    dw 86
    dw 300
    dw 4
    dw 43
    dw 346
    dw 343
    dw 353
    dw 384
    dw 46
    dw 186
    dw 104
    dw 234
    dw 117
    dw 355
    dw 80
    dw 179
    dw 109
    dw 243
    dw 36
    dw 165
    dw 287
    dw 193
    dw 212
    dw 224
    dw 308
    dw 262
    dw 278
    dw 259
    dw 105
    dw 280
    dw 128
    dw 21
    dw 167
    dw 13
    dw 116
    dw 211
    dw 173
    dw 127
    dw 206
    dw 322
    dw 318
    dw 14
    dw 83
    dw 162
    dw 96
    dw 238
    dw 209
    dw 334
    dw 37
    dw 10
    dw 344
    dw 269
    dw 125
    dw 340
    dw 189
    dw 33
    dw 106
    dw 172
    dw 57
    dw 133
    dw 19
    dw 329
    dw 132
    dw 240
    dw 53
    dw 382
    dw 348
    dw 175
    dw 138
    dw 143
    dw 324
    dw 370
    dw 310
    dw 131
    dw 196
    dw 6
    dw 70
    dw 22
    dw 113
    dw 121
    dw 327
    dw 205
    dw 345
    dw 254
    dw 253
    dw 321
    dw 248
    dw 275
    dw 134
    dw 263
    dw 108
    dw 222
    dw 313
    dw 124
    dw 152
    dw 95
    dw 163
    dw 335
    dw 330
    dw 198
    dw 216
    dw 8
    dw 118
    dw 381
    dw 294
    dw 273
    dw 74
    dw 229
    dw 354
    dw 372
    dw 60
    dw 17
    dw 226
    dw 20
    dw 323
    dw 112
    dw 285
    dw 239
    dw 103
    dw 130
    dw 215
    dw 246
    dw 68
    dw 55
    dw 126
    dw 24
    dw 351
    dw 342
    dw 158
    dw 279
    dw 1
    dw 297
    dw 289
    dw 114
    dw 362
    dw 371
    dw 146
    dw 62
    dw 151
    dw 129
    dw 72
    dw 147
    dw 236
    dw 201
    dw 369
    dw 380
    dw 32
    dw 61
    dw 35
    dw 241
    dw 169
    dw 192
    dw 374
    dw 73
    dw 63
    dw 235
    dw 71
    dw 45
    dw 302
    dw 18
    dw 149
    dw 267
    dw 247
    dw 228
    dw 244
    dw 393
    dw 194
    dw 78
    dw 210
    dw 292
    dw 66
    dw 349
    dw 39
    dw 231
    dw 75
    dw 9
    dw 218
    dw 29
    dw 233
    dw 301
    dw 142
    dw 225
    dw 293
    dw 28
    dw 82
    dw 307
    dw 387
    dw 58
    dw 332
    dw 361
    dw 47
    dw 208
    dw 99
    dw 213
    dw 56
    dw 392
    dw 67
    dw 286
    dw 184
    dw 154
    dw 266
    dw 252
    dw 221
    dw 181
    dw 223
    dw 375
    dw 87
    dw 157
    dw 333
    dw 188
    dw 187
    dw 368
    dw 298
    dw 5
    dw 79
    dw 319
    dw 360
    dw 296
    dw 207
    dw 299
    dw 136
    dw 52
    dw 91
    dw 190
    dw 379
    dw 366
    dw 107
    dw 378
    dw 358
    dw 148
    dw 42
    dw 174
    dw 12
    dw 23
    dw 270
    dw 317
    dw 65
    dw 123
    dw 271
    dw 249
    dw 356
    dw 251
    dw 76
    dw 180
    dw 30
    dw 347
    dw 331
    dw 396
    dw 150
    dw 258
    dw 98
    dw 16
    dw 102
    dw 171
    dw 304
    dw 203
    dw 15
    dw 305
    dw 2
    dw 261
    dw 316
    dw 34
    dw 284
    dw 27
    dw 166
    dw 336
    dw 176
    dw 230
    dw 145
    dw 191
    dw 339
    dw 49
    dw 314
    dw 359
    dw 178
    dw 250
    dw 350
    dw 338
    dw 90
    dw 31
    dw 274
    dw 93
    dw 97
    dw 227
    dw 341
    dw 183
    dw 283
    dw 232
    dw 110
    dw 276
    dw 38
    dw 309
    dw 277
    dw 281
    dw 3
    dw 120
    dw 199
    dw 81
    dw 51
    dw 177
    dw 395
    dw 54
    dw 111
    dw 376
    dw 115
    dw 204
    dw 187
    dw 79
    dw 190
    dw 169
    dw 218
    dw 351
    dw 308
    dw 74
    dw 311
    dw 229
    dw 270
    dw 260
    dw 75
    dw 66
    dw 341
    dw 367
    dw 195
    dw 38
    dw 125
    dw 179
    dw 191
    dw 182
    dw 36
    dw 32
    dw 385
    dw 11
    dw 29
    dw 356
    dw 344
    dw 112
    dw 62
    dw 236
    dw 272
    dw 353
    dw 193
    dw 322
    dw 377
    dw 163
    dw 24
    dw 362
    dw 391
    dw 56
    dw 12
    dw 186
    dw 147
    dw 61
    dw 208
    dw 108
    dw 221
    dw 181
    dw 145
    dw 110
    dw 40
    dw 242
    dw 250
    dw 227
    dw 277
    dw 130
    dw 287
    dw 215
    dw 241
    dw 228
    dw 41
    dw 54
    dw 390
    dw 146
    dw 394
    dw 88
    dw 89
    dw 273
    dw 225
    dw 44
    dw 60
    dw 78
    dw 313
    dw 269
    dw 172
    dw 137
    dw 21
    dw 342
    dw 19
    dw 330
    dw 306
    dw 321
    dw 166
    dw 297
    dw 303
    dw 295
    dw 387
    dw 231
    dw 302
    dw 50
    dw 70
    dw 4
    dw 160
    dw 275
    dw 372
    dw 185
    dw 197
    dw 97
    dw 3
    dw 293
    dw 5
    dw 116
    dw 246
    dw 296
    dw 368
    dw 188
    dw 271
    dw 102
    dw 388
    dw 299
    dw 87
    dw 16
    dw 379
    dw 14
    dw 332
    dw 149
    dw 320
    dw 82
    dw 203
    dw 318
    dw 129
    dw 178
    dw 107
    dw 371
    dw 37
    dw 154
    dw 314
    dw 196
    dw 249
    dw 173
    dw 118
    dw 13
    dw 148
    dw 312
    dw 315
    dw 73
    dw 119
    dw 335
    dw 317
    dw 55
    dw 162
    dw 86
    dw 183
    dw 363
    dw 151
    dw 339
    dw 10
    dw 69
    dw 361
    dw 138
    dw 252
    dw 161
    dw 85
    dw 9
    dw 153
    dw 223
    dw 212
    dw 199
    dw 355
    dw 276
    dw 290
    dw 192
    dw 127
    dw 133
    dw 247
    dw 349
    dw 348
    dw 337
    dw 53
    dw 150
    dw 27
    dw 22
    dw 65
    dw 327
    dw 397
    dw 164
    dw 174
    dw 307
    dw 364
    dw 91
    dw 121
    dw 205
    dw 94
    dw 59
    dw 343
    dw 158
    dw 329
    dw 324
    dw 7
    dw 292
    dw 383
    dw 309
    dw 170
    dw 354
    dw 0
    dw 226
    dw 176
    dw 136
    dw 243
    dw 92
    dw 210
    dw 131
    dw 265
    dw 253
    dw 396
    dw 350
    dw 100
    dw 240
    dw 120
    dw 381
    dw 334
    dw 135
    dw 31
    dw 1
    dw 261
    dw 216
    dw 398
    dw 35
    dw 319
    dw 380
    dw 266
    dw 67
    dw 219
    dw 68
    dw 201
    dw 15
    dw 352
    dw 141
    dw 232
    dw 392
    dw 81
    dw 224
    dw 71
    dw 244
    dw 347
    dw 284
    dw 76
    dw 378
    dw 180
    dw 375
    dw 283
    dw 202
    dw 282
    dw 90
    dw 259
    dw 369
    dw 83
    dw 258
    dw 262
    dw 80
    dw 289
    dw 328
    dw 184
    dw 114
    dw 144
    dw 96
    dw 126
    dw 134
    dw 222
    dw 263
    dw 268
    dw 206
    dw 366
    dw 17
    dw 142
    dw 64
    dw 72
    dw 359
    dw 285
    dw 305
    dw 245
    dw 254
    dw 28
    dw 382
    dw 294
    dw 93
    dw 257
    dw 111
    dw 49
    dw 376
    dw 57
    dw 214
    dw 26
    dw 399
    dw 235
    dw 189
    dw 384
    dw 280
    dw 300
    dw 30
    dw 8
    dw 84
    dw 365
    dw 175
    dw 288
    dw 209
    dw 340
    dw 217
    dw 374
    dw 336
    dw 45
    dw 2
    dw 46
    dw 389
    dw 33
    dw 211
    dw 140
    dw 220
    dw 101
    dw 34
    dw 357
    dw 204
    dw 99
    dw 346
    dw 301
    dw 234
    dw 25
    dw 52
    dw 43
    dw 155
    dw 267
    dw 98
    dw 159
    dw 248
    dw 143
    dw 274
    dw 325
    dw 279
    dw 105
    dw 264
    dw 139
    dw 157
    dw 194
    dw 281
    dw 278
    dw 47
    dw 333
    dw 239
    dw 230
    dw 345
    dw 291
    dw 152
    dw 370
    dw 213
    dw 63
    dw 238
    dw 124
    dw 42
    dw 18
    dw 177
    dw 6
    dw 323
    dw 255
    dw 103
    dw 77
    dw 304
    dw 48
    dw 286
    dw 171
    dw 104
    dw 326
    dw 251
    dw 132
    dw 165
    dw 58
    dw 360
    dw 168
    dw 256
    dw 128
    dw 113
    dw 298
    dw 373
    dw 167
    dw 316
    dw 386
    dw 106
    dw 331
    dw 393
    dw 109
    dw 338
    dw 156
    dw 237
    dw 23
    dw 207
    dw 117
    dw 233
    dw 310
    dw 115
    dw 39
    dw 122
    dw 51
    dw 200
    dw 20
    dw 95
    dw 395
    dw 358
    dw 198
    dw 123
end
